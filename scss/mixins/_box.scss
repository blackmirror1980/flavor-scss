@charset 'UTF-8';

////
/// Flavor SCSS Mixins Box
/// @group mixins-box
/// @author blackmirror1980
////

/// Reset inline-block mixin (useful to fix those annoying auto margins between inline-block children elements
///
/// @access public
@mixin reset-inline-block {
  letter-spacing: -.3em;
  line-height: 0;
  text-rendering: optimizeSpeed;

  * {
    letter-spacing: initial;
    line-height: initial;
  }
}

/// Display modes
///
/// @type list
/// @access private
$display-modes: array-concat((none, inline, block, inline-block, flex, inline-flex, table, inline-table, table-caption, table-header-group, table-row-group, table-column-group, table-footer-group, table-row, table-column, table-cell, list-item, run-in), $css-default-modes);

/// Checks if something is a correct display mode value
///
/// @access public
/// @param {string} $dm - the display mode
/// @return {boolean}
@function is-display-mode($dm) {
  @return is-defined($dm) and array-contains($display-modes, $dm);
}

/// Display mixin
///
/// @access public
/// @param {string} $dm - the display mode
/// @param {string} $auto-reset-inline-block [false] - the display mode
/// @example scss - Usage
///   .display-element {
///     @include display(block);
///   }
///
/// @example css - Output
///   .display-element {
///     display: block;
///   }
///
/// @example scss - Usage inline-block
///   .display-element {
///     @include display(inline-block);
///   }
///
/// @example css - Output inline-block
///   .display-element {
///     display: inline-block;
///   }
///
/// @example scss - Usage inline-block with auto reset
///   .display-element {
///     @include display(inline-block, true);
///   }
///
/// @example css - Output inline-block with auto reset
///   .display-element {
///     display: inline-block;
///     letter-spacing: -.3em;
///     line-height: 0;
///     text-rendering: optimizeSpeed;
///
///     * {
///       letter-spacing: initial;
///       line-height: initial;
///     }
///   }
@mixin display($dm, $auto-reset-inline-block: false) {
  @if is-display-mode($dm) {
    display: $dm;

    @if $dm==inline-block and $auto-reset-inline-block==true {
      @include reset-inline-block;
    }
  }
  @else {
    @warn '`display: #{$dm}` is not a valid display mode';
  }
}

/// Box sizing modes
///
/// @type list
/// @access private
$box-sizing-modes: array-concat((content-box, border-box), $css-default-modes);

/// Checks if something is box sizing mode
///
/// @access public
/// @param {string} $bs - the box sizing mode
/// @return {boolean}
@function is-box-sizing-mode($bs) {
  @return is-defined($bs) and array-contains($box-sizing-modes, $bs);
}

/// Box sizing mixin
///
/// @access public
/// @param {string} $bs - the box sizing mode
/// @example scss - Usage
///   .box-sizing-element {
///     @include box-sizing(content-box);
///   }
///
/// @example css - Output
///   .box-sizing-element {
///     box-sizing: content-box;
///   }
@mixin box-sizing($bs) {
  @if is-box-sizing-mode($bs) {
    box-sizing: $bs;
  }
  @else {
    @warn '`box-sizing: #{$bs}` is not a valid box-sizing mode';
  }
}

/// Box size modes
///
/// @type list
/// @access private
$box-size-modes: array-concat((auto), $css-default-modes);

/// Checks if something is box size
///
/// @access public
/// @param {size | string} $s - the box size
/// @return {boolean}
@function is-box-size($s) {
  @return is-defined($s) and (is-size($s) or array-contains($box-size-modes, $s));
}

/// Box bound size modes
///
/// @type list
/// @access private
$box-bound-size-modes: array-concat((none), $css-default-modes);

/// Checks if something is box bound size
///
/// @access public
/// @param {size | string} $s - the box size
/// @return {boolean}
@function is-box-bound-size($s) {
  @return is-defined($s) and (is-size($s) or array-contains($box-bound-size-modes, $s));
}

@mixin box-bounds($options) {
  $settings: (min-width: null, min-height: null, max-width: null, max-height: null);

  @if is-object($options) {
    $settings: extend($settings, $options);
  }
  @else {
    $min-width: if(length($options) > 0, nth($options, 1), null);

    @if is-defined($min-width) {
      $settings: map-merge($settings, (min-width: $min-width));
    }

    $min-height: if(length($options) > 1, nth($options, 2), null);

    @if is-defined($min-height) {
      $settings: map-merge($settings, (min-height: $min-height));
    }

    $max-width: if(length($options) > 2, nth($options, 3), null);

    @if is-defined($max-width) {
      $settings: map-merge($settings, (max-width: $max-width));
    }

    $max-height: if(length($options) > 3, nth($options, 4), null);

    @if is-defined($max-height) {
      $settings: map-merge($settings, (max-height: $max-height));
    }
  }

  $min-width: map-get($settings, min-width);

  @if is-defined($min-width) {
    @if is-box-bound-size($min-width) {
      min-width: $min-width;
    }
    @else {
      @warn '`min-width: #{$min-width}` is not a valid size';
    }
  }

  $min-height: map-get($settings, min-height);

  @if is-defined($min-height) {
    @if is-box-bound-size($min-height) {
      min-height: $min-height;
    }
    @else {
      @warn '`min-height: #{$min-height}` is not a valid size';
    }
  }

  $max-width: map-get($settings, max-width);

  @if is-defined($max-width) {
    @if is-box-bound-size($max-width) {
      max-width: $max-width;
    }
    @else {
      @warn '`max-width: #{$max-width}` is not a valid size';
    }
  }

  $max-height: map-get($settings, max-height);

  @if is-defined($max-height) {
    @if is-box-bound-size($max-height) {
      max-height: $max-height;
    }
    @else {
      @warn '`max-height: #{$max-height}` is not a valid size';
    }
  }
}

@mixin box-size($options, $height-fallback: true) {
  $settings: (width: null, height: null, min-width: null, min-height: null, max-width: null, max-height: null);

  @if is-object($options) {
    $settings: extend($settings, $options);
  }
  @else {
    $width: if(length($options) > 0, nth($options, 1), null);

    @if is-defined($width) {
      $settings: map-merge($settings, (width: $width));
    }

    $height: if(length($options) > 1, nth($options, 2), null);

    @if is-defined($height) {
      $settings: map-merge($settings, (height: $height));
    }

    $min-width: if(length($options) > 2, nth($options, 3), null);

    @if is-defined($min-width) {
      $settings: map-merge($settings, (min-width: $min-width));
    }

    $min-height: if(length($options) > 3, nth($options, 4), null);

    @if is-defined($min-height) {
      $settings: map-merge($settings, (min-height: $min-height));
    }

    $max-width: if(length($options) > 4, nth($options, 5), null);

    @if is-defined($max-width) {
      $settings: map-merge($settings, (max-width: $max-width));
    }

    $max-height: if(length($options) > 5, nth($options, 6), null);

    @if is-defined($max-height) {
      $settings: map-merge($settings, (max-height: $max-height));
    }
  }

  $width: map-get($settings, width);

  @if is-defined($width) {
    @if is-box-size($width) {
      width: $width;
    }
    @else {
      @warn '`width: #{$width}` is not a valid size';
    }
  }

  $height: map-get($settings, height);

  @if $height-fallback==true and is-defined($width) and not is-defined($height) {
    $height: $width;
  }

  @if is-defined($height) {
    @if is-box-size($height) {
      height: $height;
    }
    @else {
      @warn '`height: #{$height}` is not a valid size';
    }
  }

  $min-width: map-get($settings, min-width);
  $min-height: map-get($settings, min-height);
  $max-width: map-get($settings, max-width);
  $max-height: map-get($settings, max-height);

  @include box-bounds($min-width $min-height $max-width $max-height);
}

@mixin box-color($options) {
  $settings: (color: inherit, bgcolor: inherit);

  @if is-object($options) {
    $settings: extend($settings, $options);
  }
  @else {
    $color: if(length($options) > 0, nth($options, 1), null);

    @if is-defined($color) {
      $settings: map-merge($settings, (color: $color));
    }

    $bgcolor: if(length($options) > 1, nth($options, 2), null);

    @if is-defined($bgcolor) {
      $settings: map-merge($settings, (bgcolor: $bgcolor));
    }
  }

  $color: map-get($settings, color);

  @if is-css-color($color) {
    color: $color;
  }
  @else {
    @warn '`color: #{$color}` is not a valid css color';
  }

  $bgcolor: map-get($settings, bgcolor);

  @if is-css-color($bgcolor) {
    background-color: $bgcolor;
  }
  @else {
    @warn '`background-color: #{$bgcolor}` is not a valid css color';
  }
}

@mixin box-shadow($shadows...) {
  @include prefixer(box-shadow, $shadows);
}

/// Z-index modes
///
/// @type list
/// @access private
$z-index-modes: array-concat((auto), $css-default-modes);

/// Checks if something is z-index value
///
/// @access public
/// @param {integer | string} $zi - the z-index value
/// @return {boolean}
@function is-z-index($zi) {
  @return is-defined($zi) and (is-integer($zi) or array-contains($z-index-modes, $zi));
}

@mixin z-index($zi) {
  @if(is-z-index($zi)) {
    z-index: $zi;
  }
  @else {
    @warn '`z-index: #{$zi}` is not a valid z-index value';
  }
}

/// Visibility modes
///
/// @type list
/// @access private
$visibility-modes: array-concat((visible, hidden, collapse), $css-default-modes);

/// Checks if something is suppoerted visibility mode
///
/// @access public
/// @param {string} $vm - the visibility mode
/// @return {boolean}
@function is-visibility-mode($vm) {
  @return is-defined($vm) and array-contains($visibility-modes, $vm);
}

@mixin visibility($v) {
  @if(is-visibility-mode($v)) {
    visibility: $v;
  }
  @else {
    @warn '`visibility: #{$zi}` is not a valid visibility value';
  }
}

@mixin aspect-ratio($width, $height, $content-selector: '.content') {
  @include display(block);
  @include position(relative);

  &:before {
    @include display(block);
    @include box-size(100%, false);
    @include padding(((strip-unit($height) / strip-unit($width)) * 100%) null null null);

    content: '';
  }

  > #{$content-selector} {
    @include position(absolute, 0 0 0 0);
    @include box-size(100%);
  }
}

/// Backface visibility modes
///
/// @type list
/// @access private
$backface-visibility-modes: array-concat((visible, hidden), $css-default-modes);

/// Checks if something is suppoerted backface-visibility mode
///
/// @access public
/// @param {string} $bv - the backface-visibility mode
/// @return {boolean}
@function is-backface-visibility-mode($bv) {
  @return is-defined($bv) and array-contains($backface-visibility-modes, $bv);
}

@mixin backface-visibility($bv) {
  @if is-backface-visibility($bv) {
    @include prefixer(backface-visibility, $bv);
  }
  @else {
    @warn '`backface-visibility: #{$bv}` is not a valid backface-visibility value';
  }
}

